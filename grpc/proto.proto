syntax = "proto3";

option go_package = "handin3/grpc/proto";

service ChittyChatService {
    rpc PublishMessage(PostMessage) returns (PostResponse) {};
    
    rpc BroadcastAllMessages(BroadcastAllRequest) returns (BroadcastAllResponse) {};//may need to be a stream

    rpc NewClientJoined(NewClientJoinedRequest) returns (NewClientJoinedResponse) {};
    
    rpc ClientLeave(ClientLeaveRequest) returns (ClientLeaveResponse) {};

    //Not thought out yet(WIP)
    rpc BroadcastJoin(empty) returns (stream NewClientJoinedResponse) {};

    rpc BroadcastLeave(empty) returns (stream ClientLeaveResponse) {};
}

message PostMessage {
    string user = 1;
    string message = 2;
    int32 timeStamp = 3;
}

message PostResponse {
    bool success = 1;
    string message = 2;
}

message BroadcastAllRequest {};

message BroadcastAllResponse {
    repeated PostMessage messages = 1; //returns a collection of PostMessage instead of individual strings and ints
}

message NewClientJoinedRequest {
    string name = 1;
    int32 timeStamp = 2;
}

message NewClientJoinedResponse {
    string name = 1;
    int32 timeStamp = 2;
}

message ClientLeaveRequest {
    string name = 1;
    int32 timeStamp = 2;
}

message ClientLeaveResponse {
    string name = 1;
    int32 timeStamp = 2;
}

message empty{};